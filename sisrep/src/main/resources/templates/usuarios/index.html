<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="base/layout :: comum-header"></head>
<body class="sb-nav-fixed">
	<header th:replace="base/layout :: navbar"></header>

	<div id="layoutSidenav">
		<nav th:replace="base/layout :: menu"></nav>

		<div id="layoutSidenav_content">
			<main>
				<div class="container-fluid p-2">
					<div class="row">
						<div class="col-12">
							<nav aria-label="breadcrumb">
								<ol class="breadcrumb">
									<li class="breadcrumb-item"><a th:href="@{/home}"><i
											class="fa-duotone fa-solid fa-house"></i> Dashboard</a></li>
									<li class="breadcrumb-item active">Usuários</li>
								</ol>
							</nav>
						</div>
						<div class="col-12">
							<!-- Mensageria -->
							<div class="alert alert-success" role="alert" th:if="${msgOk}">
								<p th:text="${msgOk}"></p>
							</div>
							<div class="alert alert-danger" role="alert" th:if="${msgErro}">
								<p th:text="${msgErro}"></p>
							</div>
						</div>
						<div class="col-12">
							<div class="card">
								<div
									class="card-header card-header d-flex justify-content-between align-items-center fs-4 pr-custom-text  fw-semibold text-uppercase">
									Usuários <a th:href="@{/usuarios/usuario}"
										class="btn btn-outline-primary"> <i
										class="fa-duotone fa-solid fa-plus"></i> Novo
									</a>


								</div>

								<div class="card-body">
									<div class="row">
										<div class="col-12">
											<!-- Fomr de busca -->
											<form th:action="@{/usuarios}" method="get"
												class="row g-3 align-items-center">
												<!-- Campo de busca por nome -->
												<div class="col-md-4">
													<label class="form-label">Busca por Nome</label>
													<div class="input-group mb-3">

														<input type="text" class="form-control" th:value="${nome}"
															name="nome">
														<button class="btn btn-outline-primary input-group-text"
															type="submit">
															<i class="fa-duotone fa-regular fa-magnifying-glass"></i>
														</button>

													</div>
												</div>
												<div class="col-md-4">
													<label class="form-label">Busca por E-mail</label>
													<div class="input-group mb-3">
														<input type="text" class="form-control"
															th:value="${email}" name="email">
														<button class="btn  btn-outline-primary input-group-text"
															type="submit">
															<i class="fa-duotone fa-regular fa-magnifying-glass"></i>
														</button>

													</div>
												</div>

												<div class="col-md-2">
													<label class="form-label">Status</label>
													<div class="input-group mb-3">
														<select class="form-select " name="ativo"
															onchange="this.form.submit()">
															<option value="">Todos status</option>
															<option th:value="true" th:selected="${ativo == true}">Ativos</option>
															<option th:value="false" th:selected="${ativo == false}">Inativos</option>
														</select>
													</div>

												</div>


												<div class="col-md-2">
													<label class="form-label">Itens por página</label>
													<div class="input-group mb-3">
														<select class="form-select" name="size"
															onchange="this.form.submit()">
															<option th:each="size : ${pageSizes}" th:value="${size}"
																th:text="${size} + ' itens'"
																th:selected="${size == pageSize}"></option>
														</select>
													</div>
												</div>


											</form>


										</div>
										<div class="col-12 border-bottom pb-3 mb-3"></div>


										<div class="col-12">
											<!-- TABELA  -->
											<div class="table-responsive">
												<table class="table table-striped table-hover border">
													<thead class="table-dark">
														<tr class="fs-6 pr-custom-text">
															<th>Nome</th>
															<th>E-mail</th>
															<th>Status</th>
															<th>Ações</th>
														</tr>
													</thead>
													<tbody>
														<tr th:each="usuario : ${usuarios}">
															<td th:text="${usuario.nome}"></td>
															<td th:text="${usuario.email}"></td>
															<td><span th:if="${!usuario.inativo}"
																class="badge bg-success">Ativo</span> <span
																th:if="${usuario.inativo}" class="badge bg-secondary">Inativo</span>
															</td>
															<td><a
																th:href="@{/usuarios/editar/{id}(id=${usuario.idPessoa})}"
																class="btn btn-sm btn-outline-primary"> <i
																	class="fas fa-edit"></i>
															</a></td>
														</tr>
													</tbody>


												</table>
											</div>
											<!-- fim table responsive -->

										</div>

									</div>



								</div>
								<div class="card-footer">RODAPE</div>
							</div>
						</div>

					</div>



				</div>
				<!--FINAL CONTAINER-->
			</main>
			<footer th:replace="base/layout :: footer"></footer>
		</div>
	</div>

	<div th:replace="base/layout :: body-scripts"></div>
</body>
</html>
